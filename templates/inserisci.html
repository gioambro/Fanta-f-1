<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Inserisci risultati della giornata</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h2 { margin-top: 30px; color: darkred; }
        .pilota { margin-bottom: 20px; padding: 10px; border: 1px solid #ccc; }
        label { display: block; margin-top: 5px; }
    </style>
    <script>
        function toggleSprint(id) {
            const sprintFields = document.getElementById("sprint_" + id);
            const select = document.getElementById("sprint_si_no_" + id);
            sprintFields.style.display = (select.value === "si") ? "block" : "none";
        }
    </script>
</head>
<body>
    <h1>Inserisci risultati della giornata</h1>
    <form action="/inserisci" method="post">
        {% for giocatore in giocatori %}
            <h2>{{ giocatore }}</h2>

            {% for pilota in range(1, 3) %}
                <div class="pilota">
                    <h3>Pilota {{ pilota }}</h3>

                    <label for="{{ giocatore }}_pilota{{ pilota }}_partenza">Griglia di partenza:</label>
                    <select name="{{ giocatore }}_pilota{{ pilota }}_partenza" required>
                        {% for pos in range(1,21) %}
                            <option value="{{ pos }}">{{ pos }}</option>
                        {% endfor %}
                        <option value="ritirato">Ritirato</option>
                    </select>

                    <label for="{{ giocatore }}_pilota{{ pilota }}_arrivo">Posizione finale:</label>
                    <select name="{{ giocatore }}_pilota{{ pilota }}_arrivo" required>
                        {% for pos in range(1,21) %}
                            <option value="{{ pos }}">{{ pos }}</option>
                        {% endfor %}
                        <option value="ritirato">Ritirato</option>
                    </select>

                    <label for="sprint_si_no_{{ giocatore }}_{{ pilota }}">Gara sprint?</label>
                    <select name="{{ giocatore }}_pilota{{ pilota }}_sprint_si_no" id="sprint_si_no_{{ giocatore }}_{{ pilota }}" onchange="toggleSprint('{{ giocatore }}_{{ pilota }}')">
                        <option value="no">No</option>
                        <option value="si">Sì</option>
                    </select>

                    <div id="sprint_{{ giocatore }}_{{ pilota }}" style="display:none; margin-left:20px;">
                        <label for="{{ giocatore }}_pilota{{ pilota }}_sprint_arrivo">Posizione sprint:</label>
                        <select name="{{ giocatore }}_pilota{{ pilota }}_sprint_arrivo">
                            {% for pos in range(1,21) %}
                                <option value="{{ pos }}">{{ pos }}</option>
                            {% endfor %}
                            <option value="ritirato">Ritirato</option>
                        </select>
                    </div>

                    <label for="{{ giocatore }}_pilota{{ pilota }}_altro_bonus">Altri bonus (es. giro veloce):</label>
                    <input type="number" step="0.5" name="{{ giocatore }}_pilota{{ pilota }}_altro_bonus" value="0">

                    <label for="{{ giocatore }}_pilota{{ pilota }}_altro_malus">Altri malus (es. penalità):</label>
                    <input type="number" step="0.5" name="{{ giocatore }}_pilota{{ pilota }}_altro_malus" value="0">
                </div>
            {% endfor %}
        {% endfor %}
        <button type="submit">Salva risultati</button>
    </form>

    <p><a href="/">Torna alla home</a></p>
</body>
</html>
