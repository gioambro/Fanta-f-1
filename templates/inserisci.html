<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Inserisci Risultati</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background-color: #121212; color: #f5f5f5; }
    h1, h2 { color: #e10600; }
    .card { background-color: #1e1e1e; border: 1px solid #333; margin-bottom: 1rem; }
    .btn-primary { background-color: #e10600; border: none; }
    .btn-primary:hover { background-color: #b00500; }
  </style>
</head>
<body class="container py-4">
  <h1 class="text-center mb-4">Inserisci Risultati Piloti</h1>

  <form action="/salva" method="post" class="card p-4">
    <div class="mb-3">
      <label class="form-label">Giocatore:</label>
      <input type="text" name="giocatore" class="form-control" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Pilota:</label>
      <input type="text" name="pilota" class="form-control" required>
    </div>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label class="form-label">Griglia di partenza:</label>
        <input type="number" name="griglia" min="1" max="20" class="form-control">
      </div>
      <div class="col-md-6 mb-3">
        <label class="form-label">Posizione finale:</label>
        <input type="number" name="posizione" min="1" max="20" class="form-control">
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Gara Sprint?</label>
      <select name="sprint" id="sprint" class="form-select" onchange="toggleSprint()">
        <option value="no">No</option>
        <option value="si">S√¨</option>
      </select>
    </div>

    <div id="sprint_pos_div" class="mb-3" style="display:none;">
      <label class="form-label">Posizione Sprint:</label>
      <select name="sprint_pos" class="form-select">
        <option value="">-- Seleziona --</option>
        <option value="1">1 (8 pt)</option>
        <option value="2">2 (7 pt)</option>
        <option value="3">3 (6 pt)</option>
        <option value="4">4 (5 pt)</option>
        <option value="5">5 (4 pt)</option>
        <option value="6">6 (3 pt)</option>
        <option value="7">7 (2 pt)</option>
        <option value="8">8 (1 pt)</option>
      </select>
    </div>

    <hr>
    <h2>Bonus</h2>
    <div class="form-check">
      <input class="form-check-input fastest_lap" type="checkbox" name="fastest_lap" id="fastest_lap">
      <label class="form-check-label" for="fastest_lap">Giro veloce (+1)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input driver_day" type="checkbox" name="driver_day" id="driver_day">
      <label class="form-check-label" for="driver_day">Driver of the Day (+1)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input fastest_pit" type="checkbox" name="fastest_pit" id="fastest_pit">
      <label class="form-check-label" for="fastest_pit">Fastest pit-stop (+2)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="pole" id="pole">
      <label class="form-check-label" for="pole">Pole position (+2)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="rimonta" id="rimonta">
      <label class="form-check-label" for="rimonta">Partenza ultime 2 file e a punti (+2)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="pos_guadagnate" id="pos_guadagnate">
      <label class="form-check-label" for="pos_guadagnate">Posizioni guadagnate (+0.5/pos)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="vittoria" id="vittoria">
      <label class="form-check-label" for="vittoria">Vittoria GP (+3)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="podio" id="podio">
      <label class="form-check-label" for="podio">Podio GP (+2)</label>
    </div>

    <hr>
    <h2>Malus</h2>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="squalifica" id="squalifica">
      <label class="form-check-label" for="squalifica">Squalifica (-5)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="dnf" id="dnf">
      <label class="form-check-label" for="dnf">DNF (-3)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="pen6" id="pen6">
      <label class="form-check-label" for="pen6">Penalit√† ‚â• 6s (-4)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="pen5" id="pen5">
      <label class="form-check-label" for="pen5">Penalit√† ‚â§ 5s (-3)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input last_place" type="checkbox" name="last_place" id="last_place">
      <label class="form-check-label" for="last_place">Ultimo in gara (-2)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="q1" id="q1">
      <label class="form-check-label" for="q1">Non supera il Q1 (-1)</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" name="pos_perse" id="pos_perse">
      <label class="form-check-label" for="pos_perse">Posizioni perse (-0.5/pos)</label>
    </div>

    <div class="text-center mt-4">
      <button type="submit" class="btn btn-primary btn-lg">üíæ Salva risultati</button>
    </div>
  </form>

  <script>
    function toggleSprint() {
      let sprintSelect = document.getElementById("sprint").value;
      let sprintDiv = document.getElementById("sprint_pos_div");
      sprintDiv.style.display = (sprintSelect === "si") ? "block" : "none";
    }
    function enforceUniqueBonus(className, message) {
      let checkboxes = document.querySelectorAll("." + className);
      checkboxes.forEach(cb => {
        cb.addEventListener("change", function() {
          if (this.checked) {
            checkboxes.forEach(other => { if (other !== this) other.checked = false; });
            alert(message);
          }
        });
      });
    }
    enforceUniqueBonus("driver_day", "‚ö†Ô∏è Driver of the Day pu√≤ essere assegnato a un solo pilota.");
    enforceUniqueBonus("fastest_lap", "‚ö†Ô∏è Il giro veloce pu√≤ essere assegnato a un solo pilota.");
    enforceUniqueBonus("fastest_pit", "‚ö†Ô∏è Il fastest pit-stop pu√≤ essere assegnato a un solo pilota.");
    enforceUniqueBonus("last_place", "‚ö†Ô∏è L'ultimo in gara pu√≤ essere assegnato a un solo pilota.");
  </script>
</body>
</html>
